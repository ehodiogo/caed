{% extends 'base.html' %}

{% block title %}Resultados - {{ formulario.centro.sigla }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="text-center">Resultado do Formul√°rio {{ formulario.grau }}</h1>

  {% for area, facetas in resultado.areas.items %}
    <div class="card my-4 shadow">
      <div class="card-header bg-primary text-white">
        <h3>{{ area }}</h3>
      </div>
      <div class="card-body">
        {% for faceta, dados in facetas.items %}
          <div class="mb-3 p-3 border rounded">
            <h5>{{ faceta }} - Nota: {{ dados.nota }} ({{ dados.nivel }})</h5>
            <p><strong>Feedback:</strong> {{ dados.feedback }}</p>

            {% if dados.vantagens %}
              <h6>‚úÖ Vantagens</h6>
              <ul>
                {% for v in dados.vantagens %}
                  <li>{{ v }}</li>
                {% endfor %}
              </ul>
            {% endif %}

            {% if dados.dificuldades %}
              <h6>‚ö†Ô∏è Dificuldades</h6>
              <ul>
                {% for d in dados.dificuldades %}
                  <li>{{ d }}</li>
                {% endfor %}
              </ul>
            {% endif %}

            {% if dados.estrategias %}
              <h6>üéØ Estrat√©gias</h6>
              <ul>
                {% for e in dados.estrategias %}
                  <li>{{ e }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% endfor %}

  <div class="card my-4 shadow">
    <div class="card-header bg-secondary text-white">
      <h3>Feedback por Pergunta</h3>
    </div>
    <div class="card-body">
      {% if resultado.perguntas %}
        <ul>
          {% for pergunta_id, feedback in resultado.perguntas.items %}
            <li><strong>Pergunta {{ pergunta_id }}:</strong> {{ feedback }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p>Nenhum feedback espec√≠fico encontrado.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
